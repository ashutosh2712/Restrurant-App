(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{3954:function(e,s,t){Promise.resolve().then(t.bind(t,1732))},6463:function(e,s,t){"use strict";var r=t(1169);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},1732:function(e,s,t){"use strict";t.r(s);var r=t(7437),a=t(998),n=t(6648),d=t(6463);t(2265);var c=t(9555),i=t(3580);s.default=()=>{let{data:e,status:s}=(0,a.useSession)(),t=(0,d.useRouter)();"unauthenticated"===s&&t.push("/");let{isLoading:l,error:u,data:o}=(0,c.useQuery)("orders",()=>fetch("http://localhost:3000/api/orders").then(e=>e.json())),h=(0,c.useQueryClient)(),p=(0,c.useMutation)({mutationFn:e=>{let{id:s,status:t}=e;return fetch("http://localhost:3000/api/orders/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},onSuccess(){h.invalidateQueries({queryKey:["orders"]})}}),m=(e,s)=>{e.preventDefault();let t=e.target.elements[0].value;p.mutate({id:s,status:t}),i.Am.success("Order status Has been Changed!")};return l||"loading"===s?"Loading...":(0,r.jsx)("div",{className:"p-4 lg:px-20 xl:px-40",children:(0,r.jsxs)("table",{className:"w-full border-separate border-spacing-3",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"hidden md:block",children:"Order ID"}),(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Price"}),(0,r.jsx)("th",{className:"hidden md:block",children:"Products"}),(0,r.jsx)("th",{children:"Status"})]})}),(0,r.jsx)("tbody",{children:o.map(s=>(0,r.jsxs)("tr",{className:"text-sm md:text-base odd:bg-gray-200 even:bg-gray-50",children:[(0,r.jsx)("td",{className:"hidden md:block py-5 px-1",children:s.id}),(0,r.jsx)("td",{className:"py-5 px-1",children:s.createdAt.toString().slice(0,10)}),(0,r.jsx)("td",{className:"py-5 px-1",children:s.price}),(0,r.jsx)("td",{className:"hidden md:block py-5 px-1",children:s.products[0].title}),(null==e?void 0:e.user.isAdmin)?(0,r.jsx)("td",{className:"py-5 px-1",children:(0,r.jsxs)("form",{className:"flex items-center justify-center gap-4",onSubmit:e=>m(e,s.id),children:[(0,r.jsx)("input",{placeholder:s.status,className:"p-2 ring ring-orange-100 rounded-md"}),(0,r.jsx)("button",{children:(0,r.jsx)(n.default,{src:"/edit.png",alt:"",width:20,height:20})})]})}):(0,r.jsx)("td",{className:"py-5 px-1",children:s.status})]},s.id))})]})})}}},function(e){e.O(0,[173,998,580,270,971,23,744],function(){return e(e.s=3954)}),_N_E=e.O()}]);