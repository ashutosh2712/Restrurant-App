(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{6518:function(e,t,r){Promise.resolve().then(r.bind(r,8606))},6648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(5601),a=r.n(s)},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return i}});let s=r(9920),a=r(497),n=r(8173),l=s._(r(1241));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=n.Image},8606:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(2881),n=r(998),l=r(6648),i=r(6463),o=r(2265);t.default=()=>{let{products:e,totalItems:t,totalPrice:r,removeFromCart:c}=(0,a.x)(),{data:u}=(0,n.useSession)(),d=(0,i.useRouter)();(0,o.useEffect)(()=>{a.x.persist.rehydrate()},[]);let f=async()=>{if(u)try{let t=await fetch("http://localhost:3000/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:r,products:e,status:"Not paid!",userEmail:u.user.email})}),s=await t.json();d.push("/pay/".concat(s.id))}catch(e){console.log(e)}else d.push("/")};return(0,s.jsxs)("div",{className:" h-[calc(100vh-6rem)] md:h-[calc(100vh-9rem)] flex flex-col text-orange-500 lg:flex-row",children:[(0,s.jsx)("div",{className:"h-1/2 p-4 flex flex-col justify-center overflow-scroll lg:h-full lg:w-2/3 2xl:w-1/2 lg:px-20 xl:px-40",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 ",children:[e.img&&(0,s.jsx)(l.default,{src:e.img,alt:"",width:100,height:100}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("h1",{className:"uppercase text-xl font-bold",children:[e.title," X ",e.quantity]}),(0,s.jsx)("span",{children:e.optionTitle})]}),(0,s.jsxs)("h2",{className:"font-bold",children:["$",e.price]}),(0,s.jsx)("span",{className:"cursor-pointer",onClick:()=>c(e),children:"X"})]},e.id))}),(0,s.jsxs)("div",{className:"h-1/2 p-4 bg-fuchsia-50 flex flex-col gap-4 justify-center lg:h-full lg:w-1/3 2xl:w-1/2 lg:px-20 xl:px-40 2xl:text-xl 2xl:gap-6",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{className:"",children:["Subtotal (",t," items)"]}),(0,s.jsxs)("span",{className:"",children:["$",r]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"",children:"Service cost"}),(0,s.jsx)("span",{className:"",children:"$0.70"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"",children:"Delivery cost"}),(0,s.jsx)("span",{className:"text-green-500",children:"Free"})]}),(0,s.jsx)("hr",{className:"my-2"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"",children:"TOTAL (INCL. VAT)"}),(0,s.jsxs)("span",{className:"font-bold",children:["$",r]})]}),(0,s.jsx)("button",{className:"bg-orange-500 text-white p-3 rounded-md w-1/2 self-end",onClick:f,children:"CHECKOUT"})]})]})}},2881:function(e,t,r){"use strict";let s,a,n;r.d(t,{x:function(){return m}});var l=r(2265);let i=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(s,a,n);return n},o=e=>e?i(e):i,c=e=>e,u=e=>{let t=o(e),r=e=>(function(e,t=c){let r=l.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return l.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},d=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>d(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>d(t)(e)}}},f=[],m=(s=(e,t)=>({products:f,totalItems:0,totalPrice:0,addToCart(r){let s=t().products,a=s.find(e=>e.id===r.id);if(a){let t=s.map(e=>e.id===a.id?{...r,quantity:r.quantity+e.quantity,price:r.price+e.price}:r);e(e=>({products:t,totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))}else e(e=>({products:[...e.products,r],totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))},removeFromCart(t){e(e=>({products:e.products.filter(e=>e.id!==t.id),totalItems:e.totalItems-t.quantity,totalPrice:e.totalPrice-t.price}))},clearCart(){e({products:f,totalItems:0,totalPrice:0})}}),a={name:"cart",skipHydration:!0},(n=(e,t,r)=>{let n,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},i=!1,o=new Set,c=new Set,u=l.storage;if(!u)return s((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...t)},t,r);let f=()=>{let e=l.partialize({...t()});return u.setItem(l.name,{state:e,version:l.version})},m=r.setState;r.setState=(e,t)=>{m(e,t),f()};let h=s((...t)=>{e(...t),f()},t,r);r.getInitialState=()=>h;let p=()=>{var r,s;if(!u)return;i=!1,o.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let a=(null==(s=l.onRehydrateStorage)?void 0:s.call(l,null!=(r=t())?r:h))||void 0;return d(u.getItem.bind(u))(l.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];if(l.migrate)return[!0,l.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var s;let[a,i]=r;if(e(n=l.merge(i,null!=(s=t())?s:h),!0),a)return f()}).then(()=>{null==a||a(n,void 0),n=t(),i=!0,c.forEach(e=>e(n))}).catch(e=>{null==a||a(void 0,e)})};return r.persist={setOptions:e=>{l={...l,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},l.skipHydration||p(),n||h})?u(n):u)}},function(e){e.O(0,[173,998,971,23,744],function(){return e(e.s=6518)}),_N_E=e.O()}]);