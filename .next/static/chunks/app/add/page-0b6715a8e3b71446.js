(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{6155:function(e,t,a){Promise.resolve().then(a.bind(a,913))},6648:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var n=a(5601),l=a.n(n)},6463:function(e,t,a){"use strict";var n=a(1169);a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},5601:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return o},getImageProps:function(){return s}});let n=a(9920),l=a(497),r=a(8173),i=n._(a(1241));function s(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let o=r.Image},913:function(e,t,a){"use strict";a.r(t);var n=a(7437),l=a(998),r=a(6648),i=a(6463),s=a(2265),o=a(3580);t.default=()=>{let{data:e,status:t}=(0,l.useSession)(),[a,c]=(0,s.useState)({title:"",desc:"",price:"",catSlug:""}),[d,u]=(0,s.useState)({title:"",additionalPrice:0}),[p,h]=(0,s.useState)([]),[g,m]=(0,s.useState)(),x=(0,i.useRouter)();if("loading"===t)return(0,n.jsx)("p",{children:"Loading..."});"unauthenticated"!==t&&(null==e?void 0:e.user.isAdmin)||x.push("/");let f=e=>{c(t=>{let{name:a,value:n}=e.target;return{...t,[a]:n}})},j=e=>{let{name:t,value:a}=e.target;u(e=>({...e,[t]:"additionalPrice"===t?parseFloat(a)||0:a}))},w=async()=>{let e=new FormData;e.append("file",g),e.append("upload_preset","restrurantapp");let t=await fetch("https://api.cloudinary.com/v1_1/deeuxev50/image/upload",{method:"POST",body:e});return(await t.json()).url},v=async e=>{e.preventDefault();try{let e=await w(),t=parseFloat(a.price),n=await fetch("".concat("https://restrurant.live-projects-ashutosh.com","/api/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({img:e,...a,price:t.toString(),options:p})}),l=await n.json();x.push("/product/".concat(l.id)),o.Am.success("The product has been added!")}catch(e){console.log(e)}};return(0,n.jsx)("div",{className:"p-4 lg:px-20 xl:px-40 flex items-center justify-center text-orange-500",children:(0,n.jsxs)("form",{className:"flex flex-wrap gap-6",onSubmit:v,children:[(0,n.jsx)("h1",{children:"Add New Product"}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2 ",children:[(0,n.jsxs)("label",{className:"text-sm cursor-pointer flex gap-4 items-center",htmlFor:"file",children:[(0,n.jsx)(r.default,{src:"/upload.png",alt:"",width:64,height:64}),(0,n.jsx)("span",{children:"Upload Image"})]}),(0,n.jsx)("input",{type:"file",onChange:e=>{m(e.target.files[0])},id:"file",className:"hidden"})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col",children:[(0,n.jsx)("label",{children:"Title"}),(0,n.jsx)("input",{onChange:f,className:"ring-1 ring-orange-200 p-4 rounded-sm placeholder:text-orange-200 outline-none",type:"text",placeholder:"Bella Napoli",name:"title"})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col",children:[(0,n.jsx)("label",{children:"Desc"}),(0,n.jsx)("textarea",{onChange:f,className:"ring-1 ring-orange-200 p-4 rounded-sm placeholder:text-orange-200 outline-none",name:"desc",placeholder:"A timeless favorite with a twist, showcasing a thin crust topped with sweet tomatoes, fresh basil and creamy mozzarella."})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col",children:[(0,n.jsx)("label",{children:"Price"}),(0,n.jsx)("input",{onChange:f,className:"ring-1 ring-orange-200 p-4 rounded-sm placeholder:text-orange-200 outline-none",type:"text",placeholder:"29",name:"price"})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col",children:[(0,n.jsx)("label",{children:"Category"}),(0,n.jsx)("input",{onChange:f,className:"ring-1 ring-orange-200 p-4 rounded-sm  placeholder:text-orange-200 outline-none",type:"text",placeholder:"pizzas",name:"catSlug"})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("label",{children:"Options"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{onChange:j,className:"ring-1 ring-orange-200 p-4 rounded-sm placeholder:text-orange-200 outline-none",type:"text",placeholder:"Title",name:"title"}),(0,n.jsx)("input",{onChange:j,className:"ring-1 ring-orange-200 p-4 rounded-sm placeholder:text-orange-200 outline-none",type:"number",placeholder:"Additonal Price",name:"additionalPrice"})]}),(0,n.jsx)("div",{className:"bg-gray-500 p-2 w-48 rounded-md text-white",onClick:()=>h(e=>[...e,d]),children:"Add Option"})]}),(0,n.jsx)("div",{children:p.map(e=>(0,n.jsxs)("div",{className:"p-2  rounded-md cursor-pointer bg-gray-200 text-gray-400",onClick:()=>h(p.filter(t=>t.title!==e.title)),children:[(0,n.jsx)("span",{children:e.title}),(0,n.jsxs)("span",{children:["$",e.additionalPrice]})]},e.title))}),(0,n.jsx)("button",{type:"submit",className:"bg-orange-500 p-4 text-white w-48 rounded-md relative h-14 flex items-center justify-center",children:"Submit"})]})})}}},function(e){e.O(0,[173,998,580,971,23,744],function(){return e(e.s=6155)}),_N_E=e.O()}]);