(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{6208:function(e,t,r){Promise.resolve().then(r.bind(r,9160))},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},9160:function(e,t,r){"use strict";r.r(t),r.d(t,{dynamic:function(){return l}});var n=r(7437),a=r(2881),i=r(6463),o=r(2265);let s=()=>{let e=(0,i.useSearchParams)().get("payment_intent"),t=(0,a.x)(e=>e.clearCart),r=(0,i.useRouter)();return(0,o.useEffect)(()=>{(async()=>{try{e&&(await fetch("".concat("https://restrurant.live-projects-ashutosh.com","/api/confirm/").concat(e),{method:"PUT"}),t(),r.push("/orders"))}catch(e){console.error(e)}})()},[e,r,t]),(0,n.jsx)("div",{children:"Payment Successful, You are being redirected to the orders page. Please do not close the page."})};t.default=()=>(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(s,{})});let l="force-dynamic"},2881:function(e,t,r){"use strict";let n,a,i;r.d(t,{x:function(){return f}});var o=r(2265);let s=e=>{let t;let r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:n,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(n,a,i);return i},l=e=>e?s(e):s,u=e=>e,c=e=>{let t=l(e),r=e=>(function(e,t=u){let r=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},d=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>d(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>d(t)(e)}}},m=[],f=(n=(e,t)=>({products:m,totalItems:0,totalPrice:0,addToCart(r){let n=t().products,a=n.find(e=>e.id===r.id);if(a){let t=n.map(e=>e.id===a.id?{...r,quantity:r.quantity+e.quantity,price:r.price+e.price}:r);e(e=>({products:t,totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))}else e(e=>({products:[...e.products,r],totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))},removeFromCart(t){e(e=>({products:e.products.filter(e=>e.id!==t.id),totalItems:e.totalItems-t.quantity,totalPrice:e.totalPrice-t.price}))},clearCart(){e({products:m,totalItems:0,totalPrice:0})}}),a={name:"cart",skipHydration:!0},(i=(e,t,r)=>{let i,o={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(n):n(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},s=!1,l=new Set,u=new Set,c=o.storage;if(!c)return n((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...t)},t,r);let m=()=>{let e=o.partialize({...t()});return c.setItem(o.name,{state:e,version:o.version})},f=r.setState;r.setState=(e,t)=>{f(e,t),m()};let h=n((...t)=>{e(...t),m()},t,r);r.getInitialState=()=>h;let p=()=>{var r,n;if(!c)return;s=!1,l.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let a=(null==(n=o.onRehydrateStorage)?void 0:n.call(o,null!=(r=t())?r:h))||void 0;return d(c.getItem.bind(c))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate)return[!0,o.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var n;let[a,s]=r;if(e(i=o.merge(s,null!=(n=t())?n:h),!0),a)return m()}).then(()=>{null==a||a(i,void 0),i=t(),s=!0,u.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return r.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},o.skipHydration||p(),i||h})?c(i):c)}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6208)}),_N_E=e.O()}]);