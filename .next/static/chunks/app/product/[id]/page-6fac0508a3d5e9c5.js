(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{2829:function(e,t,r){Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.bind(r,5886)),Promise.resolve().then(r.bind(r,7467))},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},5886:function(e,t,r){"use strict";var n=r(7437),i=r(998),a=r(6463),s=r(3580);t.default=e=>{let{id:t}=e,{data:r,status:o}=(0,i.useSession)(),l=(0,a.useRouter)();if("loading"==o)return(0,n.jsx)("p",{children:"Loading.."});if("unauthenticated"==o||!(null==r?void 0:r.user.isAdmin))return;let u=async()=>{let e=await fetch("http://localhost:3000/api/products/".concat(t),{method:"DELETE"});if(200===e.status)l.push("/menu"),s.Am.success("Product Deleted!");else{let t=await e.json();s.Am.error(t.message)}};return(0,n.jsx)("button",{className:"bg-red-400 p-2 rounded-full absolute top-4 right-4 text-white",onClick:u,children:"Delete"})}},7467:function(e,t,r){"use strict";var n=r(7437),i=r(2881),a=r(2265),s=r(3580);t.default=e=>{var t,r;let{product:o}=e,[l,u]=(0,a.useState)(o.price),[c,d]=(0,a.useState)(1),[m,p]=(0,a.useState)(0),{addToCart:h}=(0,i.x)();return(0,a.useEffect)(()=>{i.x.persist.rehydrate()},[]),(0,a.useEffect)(()=>{var e;(null===(e=o.options)||void 0===e?void 0:e.length)&&u(c*o.price+o.options[m].additionalPrice)},[c,m,o.options,o.price]),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold",children:["$",l]}),(0,n.jsx)("div",{className:"flex gap-4",children:(null===(t=o.options)||void 0===t?void 0:t.length)&&(null===(r=o.options)||void 0===r?void 0:r.map((e,t)=>(0,n.jsx)("button",{className:" min-w-[6rem] p-2 ring-1 ring-orange-400 rounded-md",style:{background:m===t?"rgb(251 146 60)":"white",color:m===t?"white":"red"},onClick:()=>p(t),children:e.title},e.title)))}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex justify-between w-full p-3 ring-1 ring-orange-500",children:[(0,n.jsx)("span",{children:"Quantity"}),(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)("button",{onClick:()=>d(e=>e>1?e-1:1),children:"<"}),(0,n.jsx)("span",{children:c}),(0,n.jsx)("button",{onClick:()=>d(e=>e<10?e+1:10),children:">"})]})]}),(0,n.jsx)("button",{className:"uppercase w-56 bg-orange-500 text-white p-3 ring-1 ring-orange-500",onClick:()=>{var e;h({id:o.id,title:o.title,img:o.img,price:l,...(null===(e=o.options)||void 0===e?void 0:e.length)&&{optionTitle:o.options[m].title},quantity:c}),s.Am.success("Product added to the Cart!")},children:"Add to cart"})]})]})}},2881:function(e,t,r){"use strict";let n,i,a;r.d(t,{x:function(){return p}});var s=r(2265);let o=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,a={setState:n,getState:i,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(n,i,a);return a},l=e=>e?o(e):o,u=e=>e,c=e=>{let t=l(e),r=e=>(function(e,t=u){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},d=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>d(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>d(t)(e)}}},m=[],p=(n=(e,t)=>({products:m,totalItems:0,totalPrice:0,addToCart(r){let n=t().products,i=n.find(e=>e.id===r.id);if(i){let t=n.map(e=>e.id===i.id?{...r,quantity:r.quantity+e.quantity,price:r.price+e.price}:r);e(e=>({products:t,totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))}else e(e=>({products:[...e.products,r],totalItems:e.totalItems+r.quantity,totalPrice:e.totalPrice+r.price}))},removeFromCart(t){e(e=>({products:e.products.filter(e=>e.id!==t.id),totalItems:e.totalItems-t.quantity,totalPrice:e.totalPrice-t.price}))},clearCart(){e({products:m,totalItems:0,totalPrice:0})}}),i={name:"cart",skipHydration:!0},(a=(e,t,r)=>{let a,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...i},o=!1,l=new Set,u=new Set,c=s.storage;if(!c)return n((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},t,r);let m=()=>{let e=s.partialize({...t()});return c.setItem(s.name,{state:e,version:s.version})},p=r.setState;r.setState=(e,t)=>{p(e,t),m()};let h=n((...t)=>{e(...t),m()},t,r);r.getInitialState=()=>h;let f=()=>{var r,n;if(!c)return;o=!1,l.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let i=(null==(n=s.onRehydrateStorage)?void 0:n.call(s,null!=(r=t())?r:h))||void 0;return d(c.getItem.bind(c))(s.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate)return[!0,s.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var n;let[i,o]=r;if(e(a=s.merge(o,null!=(n=t())?n:h),!0),i)return m()}).then(()=>{null==i||i(a,void 0),a=t(),o=!0,u.forEach(e=>e(a))}).catch(e=>{null==i||i(void 0,e)})};return r.persist={setOptions:e=>{s={...s,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},s.skipHydration||f(),a||h})?c(a):c)}},function(e){e.O(0,[173,998,580,971,23,744],function(){return e(e.s=2829)}),_N_E=e.O()}]);